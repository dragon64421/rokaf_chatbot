행정이 관리자를 위한 설명서

Version 1.0
2022.2.22
김영준
01051286093

#######################
목차
1. 개요
	1.1 챗봇 작동방식
2. 준비과정
	2.1. AWS 설정
	2.2 카카오채널 설정
3. 챗봇 실행법
4. 에러 해결법
#######################

1. 개요
개발이유 및 개요는 “행정이 개발개요.hwp” 참고
설명서를 작성하게된 이유는 생도대의 발전을 위해서 노력하려는 의지가 후배들에게도 계속해서 이어졌으면 하기 때문임
나는 능력이 부족해서 이정도 밖에 못했지만 후배들이라면 더 발전시킬 수 있을 것이라고 생각함
내가 바랬던 최종 목표는 전대단위의 모든 조사를 행정이를 통해서 수합할 수 있는 것이였음, 하지만 능력의 부족과 시간의 부2족으로 완성하지 못하였으니 부디 후배들이 이어서 완성해줬으면 하는 바램임

1.1 챗봇 작동방식
행정이는 카카오채널을 통해서 이뤄지는 서비스(?)임. 또한 24시간 교육용 노트북을 통해서 서버를 열어둘 수 없기 때문에 24시간 서버를 열어둘 클라우드 서버를 이용함. 지금은 1년간 무료로 사용할 수 있는 AWS를 사용하고 있지만 오라클 등 다른 서버를 사용해도 무방함.

행정이의 코드를 보면 굉장히 복잡하는 것을 알 수 있을 건데 이럴 수 밖에 없는 이유가 바로 (중요)“챗봇이 대화상대와의 이전 대화를 기억하지 못하기 때문”임. 예를 들어 사용자가 신청 중에 회식 메뉴를 보내면 챗봇은 답장으로 수량이 몇개냐고 물을거임. 그래서 사용자가 수량을 보내면 챗봇은 왜 그 숫자가 답으로 왔는지 기억하지 못함. 따라서 사용자가 지금 어떤 대화를 어디까지 하고 있는지를 저장하고 메시지가 올때마다 이를 갱신해야함.

##챗봇 구동과정의 간단한 설명
-메시지 도착(보낸사람과 메시지의 정보가 담겨있음)
-보낸 사람이 등록된 사람인지 확인
  -등록된 사람이 아니라면 등록 안내 메시지 전송
-(등록된 사람이면) 등록된 사람의 상태 확인 (*상태 = 어떤 대화를 하고 있었고 어디까지 했었는지, 또는 아무 대화도 안하던 상태)
-상태를 확인했을 때 지금 받은 메시지가 질문의 답이면 내용을 저장하고 다음 질문이 있다면 다음 질문을 전송. 신청하고자 하는 신청의 이름이면 해당 신청의 첫번째 질문 전송. 등등 상태를 확인하고 그에 맞는 행동 수행

상태(status)의 종류
0
1
신청이름.숫자 (ex. 2중대 bbq.2)

##관리자와 슈퍼관리자
챗봇의 무분별한 사용을 방지하고 혹시모를 개인정보 보호와 사용허가를 위해 사용자의 등급을 3단계로 구분하였음
0 - 일반 사용자
1 - 관리자: 신청을 생성/삭제 자신이 개설한 신청의 내용을 내려받을 권한이 있음(*다른 관리자가 개설한 신청의 수합 내용을 내려받을 수 없음)
2 - 슈퍼관리자: 관리자를 등록하거나 삭제할 수 있음. 모든 신청의 내용을 '마스터키' 명령어를 통해 내려받을 수 있음
등급 정보는 name_id.xlsx 파일에 0,1,2로 구분되어 있음
슈퍼관리자는 엑셀에서 직접 등급 정보를 2로 수정하는 것으로만 지정할 수 있음

##기타 참고사항
이메일로 보내는 기능은 웹메일로는 잘 보내지지 않거나 보내지는데 시간이 오래걸림
서버를 새로 열었을 경우 다운로드코드 명령어를 보냈을 때 답장으로 보낼 메시지에서 IP주소를 새 서버의 주소로 수정해야함


2. 준비과정
2. 1 AWS 설정
